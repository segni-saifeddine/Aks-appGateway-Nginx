$ az aks create --name my-private-aks --resource-group Saif-aks-lab --node-vm-size Standard_DS2_v2 --enable-managed-identity --enable-private-cluster --kubernetes-version 1.24.9  --vnet-subnet-id /subscriptions/6d750179-05c8-4654-9e43-3b24ebb2eb22/resourceGroups/Saif-aks-lab/providers/Microsoft.Network/virtualNetworks/vnet-aks/subnets/subnet-aks

$ az aks get-credentials --resource-group Saif-aks-lab  --name my-private-aks

$ kubectl get nodes



curl -L -H "Host: ingress.gaunacode.com" http://10.0.0.100


az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c " kubectl get nodes"

az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c "kubectl create namespace ingress-basic"

az network vnet subnet list-available-ips --resource-group Saif-aks-lab --vnet-name myVNet -n aks-subnet

az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c " helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx &&  helm repo update &&  helm install nginx-ingress ingress-nginx/ingress-nginx  --version 4.1.3 \
  --namespace ingress-basic \
  --set controller.service.annotations."service\.beta\.kubernetes\.io/azure-load-balancer-health-probe-request-path"=/healthz \
  -f internal-ip.yaml \
  --set controller.replicaCount=2 " --file internal-ip.yaml

az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c " kubectl get svc -n ingress-basic -o wide -w ingress-nginx-controller "

az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c " kubectl apply -f app1.yaml" --file app1.yaml

az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c " kubectl apply -f app2.yaml" --file app2.yaml

az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c " kubectl get pods -n ingress-basic "

az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c " kubectk get svc -n ingress-basic -o wide -w ingress-nginx-controller "


az aks command invoke -g  Saif-aks-lab  -n myPrivateAks -c " kubectl apply -f ingress.yaml" --file ingress.yaml



